## 쿠키란?

- 세션id를 전달하기 위한 매개체
- 클라이언트가 보관하고 있는 데이터로 쿠키의 생성은 클라이언트가 요청을 했을 때 서버에서 쿠키를 생성하여 클라이언트에게 보내주어 생성된다.
- 클라이언트에 있는 쿠키저장소에 쿠키를 저장을 한 후 클라이언트가 서버에 요청을 할 때 쿠키를 같이 보낸준다.
- 쿠키는 브라우저만 사용가능 안드로이드, ios 같은거는 토큰을 활용해야 한다.


## 쿠키의 구성

1. 이름 - 각각의 쿠키를 구별하는데 사용되는 이름
2. 값 - 쿠키의 이름과 관련된 값
3. 유효 시간 - 쿠키의 유지 시간
4. 도메인 - 쿠키를 전송할 도메인
5. 경로 - 쿠키를 전송할 요청 시간

## 쿠키 헤더

- 쿠키이름, 도메인값, path, expires(쿠키 유효날짜)

- Set-Cookie : 서버에서 클라이언트로 쿠키 전달(응답)
- Cookie : 클라이엔트가 서버에서 쿠키를 받고 저장한 후 http 요청시 서버로 전달


## 세션

- 클라이언트가 요청을 했을 때 서버에서 sessionDB에서 세션ID를 생성한다. 세션에서 쿠키를 생성하여 쿠키 안에 세션ID를 넣고 클라이언트에 응답을 해준다.
- 중요한 정보는 서버에 저장한다. 쿠키에는 최소한의 정보(세션ID, 토큰)등을 넣는다.

## 토큰

- String 형태로 유저의 정보를 담고 있는 문자열
- 쿠키와 마찬가지로 클라이언트에서 요청을 하면 서버로 가서 sessiondb에서 일치하는 유저 정보가 있는지 찾아본다.

### 위에 설명의 공통점

- sessionDB에서 유저의 정보를 찾아야 함으로 사용자가 많아질수록 DB리소스가 많이 필요해진다.


## JWT(Json Web Token)

- Json 포멧을 이용한 웹 토큰이다.
- 서버는 유저를 인증하는데 필요한 정보를 토큰에 저장 후 브라우저에 토큰을 넘겨준다.
- 클라이언트에서 요청을 하면 sessiondb를 거치지 않고 토큰이 유효한지만 검사한다.
- JWT는 암호화되어 있지 않으므로 비밀정보를 저장해서는 안된다.


## 세션 vs JWT 장단점

### 세션
1. 장점
- 여러 디바이스에서 로그인 했을 때 강제 로그아웃을 할 수 있다. 
- (예를 들어 구글아이디를 갤럭시, 갤럭시탭, 노트북에 로그인되어 있는 경우 갤럭시에서 노트북의 세션아이디를 삭제하여 강제 로그아웃을 할 수 있다.)

2. 단점
- 세션을 사용하기 위해서는 sessiondb가 필요한데 사용자가 많아질수록 db가 많이 필요해지므로 비용이 많이 발생한다.

3. ex) 구글로그인

### JWT
1. 장접
- sessiondb를 사용하지 않으므로 비용이 적게 발생한다.

2. 단점
- 여러 디바이스에 로그인 된 경우 강제 로그아웃을 할 수 없다. (해당 토큰이 만료될 때까지 유효함)

3. ex) QR체크인


